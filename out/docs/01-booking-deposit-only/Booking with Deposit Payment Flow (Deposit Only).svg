<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="4122px" preserveAspectRatio="none" style="width:1945px;height:4122px;background:#FFFFFF;" version="1.1" viewBox="0 0 1945 4122" width="1945px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="642" x="655" y="37.1182">Booking with Deposit Payment Flow (Deposit Only)</text><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="491" x="730.5" y="63.8555">EV Service Center Management System</text><rect fill="#FFFFFF" height="171.5952" style="stroke:#000000;stroke-width:1.0;" width="10" x="330.5" y="289.5005"/><rect fill="#FFFFFF" height="627.3809" style="stroke:#000000;stroke-width:1.0;" width="10" x="330.5" y="490.895"/><rect fill="#FFFFFF" height="1211.3638" style="stroke:#000000;stroke-width:1.0;" width="10" x="330.5" y="1817.6567"/><rect fill="#FFFFFF" height="29.7993" style="stroke:#000000;stroke-width:1.0;" width="10" x="330.5" y="3470.1782"/><rect fill="#FFFFFF" height="1121.9658" style="stroke:#000000;stroke-width:1.0;" width="10" x="605.5" y="1877.2554"/><rect fill="#FFFFFF" height="567.7822" style="stroke:#000000;stroke-width:1.0;" width="10" x="832.5" y="520.6943"/><rect fill="#FFFFFF" height="496.7856" style="stroke:#000000;stroke-width:1.0;" width="10" x="832.5" y="1291.0718"/><rect fill="#FFFFFF" height="350.3911" style="stroke:#000000;stroke-width:1.0;" width="10" x="832.5" y="3089.9878"/><rect fill="#FFFFFF" height="204.1938" style="stroke:#000000;stroke-width:1.0;" width="10" x="1149.5" y="712.6875"/><rect fill="#FFFFFF" height="204.1938" style="stroke:#000000;stroke-width:1.0;" width="10" x="1149.5" y="1553.8643"/><rect fill="#FFFFFF" height="105.1973" style="stroke:#000000;stroke-width:1.0;" width="10" x="1149.5" y="2566.8335"/><rect fill="#FFFFFF" height="188.3945" style="stroke:#000000;stroke-width:1.0;" width="10" x="1149.5" y="3222.1851"/><rect fill="#FFFFFF" height="29.7993" style="stroke:#000000;stroke-width:1.0;" width="10" x="1331.5" y="1118.2759"/><rect fill="#FFFFFF" height="639.7822" style="stroke:#000000;stroke-width:1.0;" width="10" x="1331.5" y="1177.8745"/><rect fill="#FFFFFF" height="29.7993" style="stroke:#000000;stroke-width:1.0;" width="10" x="1483" y="742.4868"/><rect fill="#FFFFFF" height="29.7993" style="stroke:#000000;stroke-width:1.0;" width="10" x="1483" y="1494.2656"/><rect fill="#FFFFFF" height="29.7993" style="stroke:#000000;stroke-width:1.0;" width="10" x="1483" y="1599.4629"/><rect fill="#FFFFFF" height="29.7993" style="stroke:#000000;stroke-width:1.0;" width="10" x="1483" y="2053.4492"/><rect fill="#FFFFFF" height="286.7891" style="stroke:#000000;stroke-width:1.0;" width="10" x="1483" y="2250.2451"/><rect fill="#FFFFFF" height="29.7993" style="stroke:#000000;stroke-width:1.0;" width="10" x="1483" y="2612.4321"/><rect fill="#FFFFFF" height="29.7993" style="stroke:#000000;stroke-width:1.0;" width="10" x="1483" y="2939.6226"/><rect fill="#FFFFFF" height="29.7993" style="stroke:#000000;stroke-width:1.0;" width="10" x="1483" y="3162.5864"/><rect fill="#FFFFFF" height="112.9966" style="stroke:#000000;stroke-width:1.0;" width="10" x="1483" y="3267.7837"/><rect fill="#FFFFFF" height="160.3945" style="stroke:#000000;stroke-width:1.0;" width="10" x="1625.5" y="2726.6294"/><rect fill="#FFFFFF" height="2355.501" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="1923" x="15" y="1235.6738"/><rect fill="#FFFFFF" height="207.9932" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="1880" x="48" y="2687.0308"/><path d="M15,3037.0205 L1938,3037.0205 L1938,3588.6748 A2.5,2.5 0 0 1 1935.5,3591.1748 L17.5,3591.1748 A2.5,2.5 0 0 1 15,3588.6748 L15,3037.0205 " fill="#FFFFFF" style="stroke:none;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="95" x2="95" y1="174.5039" y2="4023.1577"/><line style="stroke:#000000;stroke-width:1.0;" x1="335.5" x2="335.5" y1="174.5039" y2="4023.1577"/><line style="stroke:#000000;stroke-width:1.0;" x1="610" x2="610" y1="174.5039" y2="4023.1577"/><line style="stroke:#000000;stroke-width:1.0;" x1="837" x2="837" y1="174.5039" y2="4023.1577"/><line style="stroke:#000000;stroke-width:1.0;" x1="1154.5" x2="1154.5" y1="174.5039" y2="4023.1577"/><line style="stroke:#000000;stroke-width:1.0;" x1="1336.5" x2="1336.5" y1="174.5039" y2="4023.1577"/><line style="stroke:#000000;stroke-width:1.0;" x1="1487.5" x2="1487.5" y1="174.5039" y2="4023.1577"/><line style="stroke:#000000;stroke-width:1.0;" x1="1630.5" x2="1630.5" y1="174.5039" y2="4023.1577"/><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="57" x="64" y="154.5498">&#171;Actor&#187;</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="69" x="58" y="171.5645">Customer</text><ellipse cx="95.5" cy="88.4746" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1.0;"/><path d="M95.5,96.4746 L95.5,123.4746 M82.5,104.4746 L108.5,104.4746 M95.5,123.4746 L82.5,138.4746 M95.5,123.4746 L108.5,138.4746 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="57" x="64" y="4036.2329">&#171;Actor&#187;</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="69" x="58" y="4053.2476">Customer</text><ellipse cx="95.5" cy="4065.187" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1.0;"/><path d="M95.5,4073.187 L95.5,4100.187 M82.5,4081.187 L108.5,4081.187 M95.5,4100.187 L82.5,4115.187 M95.5,4100.187 L108.5,4115.187 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><rect fill="#90EE90" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="104" x="283.5" y="125.4746"/><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="35" x="318" y="146.5498">&#171;UI&#187;</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="90" x="290.5" y="163.5645">BookingPage</text><rect fill="#90EE90" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="104" x="283.5" y="4022.1577"/><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="35" x="318" y="4043.2329">&#171;UI&#187;</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="90" x="290.5" y="4060.2476">BookingPage</text><rect fill="#FFFFE0" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="155" x="533" y="125.4746"/><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="69" x="576" y="146.5498">&#171;Service&#187;</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="141" x="540" y="163.5645">AppointmentService</text><rect fill="#FFFFE0" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="155" x="533" y="4022.1577"/><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="69" x="576" y="4043.2329">&#171;Service&#187;</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="141" x="540" y="4060.2476">AppointmentService</text><rect fill="#FFFFE0" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="127" x="774" y="125.4746"/><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="69" x="803" y="146.5498">&#171;Service&#187;</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="113" x="781" y="163.5645">VNPayController</text><rect fill="#FFFFE0" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="127" x="774" y="4022.1577"/><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="69" x="803" y="4043.2329">&#171;Service&#187;</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="113" x="781" y="4060.2476">VNPayController</text><rect fill="#FFFFE0" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="146" x="1081.5" y="125.4746"/><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="69" x="1120" y="146.5498">&#171;Service&#187;</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="132" x="1088.5" y="163.5645">TransactionService</text><rect fill="#FFFFE0" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="146" x="1081.5" y="4022.1577"/><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="69" x="1120" y="4043.2329">&#171;Service&#187;</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="132" x="1088.5" y="4060.2476">TransactionService</text><rect fill="#FFB6C1" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="118" x="1277.5" y="125.4746"/><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="76" x="1298.5" y="146.5498">&#171;External&#187;</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="104" x="1284.5" y="163.5645">VNPayGateway</text><rect fill="#FFB6C1" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="118" x="1277.5" y="4022.1577"/><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="76" x="1298.5" y="4043.2329">&#171;External&#187;</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="104" x="1284.5" y="4060.2476">VNPayGateway</text><rect fill="#F5F5F5" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="85" x="1445.5" y="125.4746"/><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="71" x="1452.5" y="146.5498">&#171;System&#187;</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="66" x="1455" y="163.5645">Database</text><rect fill="#F5F5F5" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="85" x="1445.5" y="4022.1577"/><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="71" x="1452.5" y="4043.2329">&#171;System&#187;</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="66" x="1455" y="4060.2476">Database</text><rect fill="#F5F5F5" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="100" x="1580.5" y="125.4746"/><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="71" x="1595" y="146.5498">&#171;System&#187;</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="86" x="1587.5" y="163.5645">EmailService</text><rect fill="#F5F5F5" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="100" x="1580.5" y="4022.1577"/><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="71" x="1595" y="4043.2329">&#171;System&#187;</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="86" x="1587.5" y="4060.2476">EmailService</text><rect fill="#FFFFFF" height="171.5952" style="stroke:#000000;stroke-width:1.0;" width="10" x="330.5" y="289.5005"/><rect fill="#FFFFFF" height="627.3809" style="stroke:#000000;stroke-width:1.0;" width="10" x="330.5" y="490.895"/><rect fill="#FFFFFF" height="1211.3638" style="stroke:#000000;stroke-width:1.0;" width="10" x="330.5" y="1817.6567"/><rect fill="#FFFFFF" height="29.7993" style="stroke:#000000;stroke-width:1.0;" width="10" x="330.5" y="3470.1782"/><rect fill="#FFFFFF" height="1121.9658" style="stroke:#000000;stroke-width:1.0;" width="10" x="605.5" y="1877.2554"/><rect fill="#FFFFFF" height="567.7822" style="stroke:#000000;stroke-width:1.0;" width="10" x="832.5" y="520.6943"/><rect fill="#FFFFFF" height="496.7856" style="stroke:#000000;stroke-width:1.0;" width="10" x="832.5" y="1291.0718"/><rect fill="#FFFFFF" height="350.3911" style="stroke:#000000;stroke-width:1.0;" width="10" x="832.5" y="3089.9878"/><rect fill="#FFFFFF" height="204.1938" style="stroke:#000000;stroke-width:1.0;" width="10" x="1149.5" y="712.6875"/><rect fill="#FFFFFF" height="204.1938" style="stroke:#000000;stroke-width:1.0;" width="10" x="1149.5" y="1553.8643"/><rect fill="#FFFFFF" height="105.1973" style="stroke:#000000;stroke-width:1.0;" width="10" x="1149.5" y="2566.8335"/><rect fill="#FFFFFF" height="188.3945" style="stroke:#000000;stroke-width:1.0;" width="10" x="1149.5" y="3222.1851"/><rect fill="#FFFFFF" height="29.7993" style="stroke:#000000;stroke-width:1.0;" width="10" x="1331.5" y="1118.2759"/><rect fill="#FFFFFF" height="639.7822" style="stroke:#000000;stroke-width:1.0;" width="10" x="1331.5" y="1177.8745"/><rect fill="#FFFFFF" height="29.7993" style="stroke:#000000;stroke-width:1.0;" width="10" x="1483" y="742.4868"/><rect fill="#FFFFFF" height="29.7993" style="stroke:#000000;stroke-width:1.0;" width="10" x="1483" y="1494.2656"/><rect fill="#FFFFFF" height="29.7993" style="stroke:#000000;stroke-width:1.0;" width="10" x="1483" y="1599.4629"/><rect fill="#FFFFFF" height="29.7993" style="stroke:#000000;stroke-width:1.0;" width="10" x="1483" y="2053.4492"/><rect fill="#FFFFFF" height="286.7891" style="stroke:#000000;stroke-width:1.0;" width="10" x="1483" y="2250.2451"/><rect fill="#FFFFFF" height="29.7993" style="stroke:#000000;stroke-width:1.0;" width="10" x="1483" y="2612.4321"/><rect fill="#FFFFFF" height="29.7993" style="stroke:#000000;stroke-width:1.0;" width="10" x="1483" y="2939.6226"/><rect fill="#FFFFFF" height="29.7993" style="stroke:#000000;stroke-width:1.0;" width="10" x="1483" y="3162.5864"/><rect fill="#FFFFFF" height="112.9966" style="stroke:#000000;stroke-width:1.0;" width="10" x="1483" y="3267.7837"/><rect fill="#FFFFFF" height="160.3945" style="stroke:#000000;stroke-width:1.0;" width="10" x="1625.5" y="2726.6294"/><path d="M44,192.0039 L44,260.0039 A2.5,2.5 0 0 0 46.5,262.5039 L1678.5,262.5039 A2.5,2.5 0 0 0 1681,260.0039 L1681,199.5039 L1671,189.5039 L46.5,189.5039 A2.5,2.5 0 0 0 44,192.0039 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M1671,189.5039 L1671,198.2539 A1.25,1.25 0 0 0 1672.25,199.5039 L1681,199.5039 L1671,189.5039 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="72" x="584.75" y="207.5737">Use Case:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="467" x="661.75" y="207.5737">Customer &#273;&#7863;t c&#7885;c 200,000 VND &#273;&#7875; book l&#7883;ch h&#7865;n (kh&#244;ng ch&#7885;n d&#7883;ch v&#7909;)</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="103" x="584.75" y="223.373">Pre-condition:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="307" x="692.75" y="223.373">Customer &#273;&#227; &#273;&#259;ng nh&#7853;p, c&#243; xe trong h&#7879; th&#7889;ng</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="111" x="584.75" y="239.1724">Post-condition:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="431" x="700.75" y="239.1724">Appointment &#273;&#432;&#7907;c t&#7841;o v&#7899;i status "confirmed", c&#7885;c &#273;&#227; thanh to&#225;n</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="39" x="584.75" y="254.9717">Note:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="379" x="628.75" y="254.9717">D&#7883;ch v&#7909; c&#7909; th&#7875; s&#7869; x&#225;c &#273;&#7883;nh sau khi technician ki&#7875;m tra xe</text><polygon fill="#000000" points="318.5,285.5005,328.5,289.5005,318.5,293.5005,322.5,289.5005" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="95.5" x2="324.5" y1="289.5005" y2="289.5005"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="108" x="102.5" y="284.771">fillBookingForm()</text><line style="stroke:#000000;stroke-width:2.0;" x1="340.5" x2="382.5" y1="319.2998" y2="319.2998"/><line style="stroke:#000000;stroke-width:2.0;" x1="382.5" x2="382.5" y1="319.2998" y2="332.2998"/><line style="stroke:#000000;stroke-width:2.0;" x1="341.5" x2="382.5" y1="332.2998" y2="332.2998"/><polygon fill="#000000" points="351.5,328.2998,341.5,332.2998,351.5,336.2998,347.5,332.2998" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="99" x="347.5" y="314.5703">validateInput()</text><path d="M345,347.7998 L345,430.7998 A2.5,2.5 0 0 0 347.5,433.2998 L585.5,433.2998 A2.5,2.5 0 0 0 588,430.7998 L588,355.2998 L578,345.2998 L347.5,345.2998 A2.5,2.5 0 0 0 345,347.7998 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M578,345.2998 L578,354.0498 A1.25,1.25 0 0 0 579.25,355.2998 L588,355.2998 L578,345.2998 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="59" x="351" y="363.3696">Validate:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="114" x="351" y="379.1689">- vehicleId exists</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="144" x="351" y="394.9683">- scheduledDate valid</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="171" x="351" y="410.7676">- scheduledTime available</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="222" x="351" y="426.5669">- bookingType: "deposit_booking"</text><polygon fill="#000000" points="106.5,457.0957,96.5,461.0957,106.5,465.0957,102.5,461.0957" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="100.5" x2="334.5" y1="461.0957" y2="461.0957"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="147" x="112.5" y="456.3662">showBookingPreview()</text><polygon fill="#000000" points="318.5,486.895,328.5,490.895,318.5,494.895,322.5,490.895" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="95.5" x2="324.5" y1="490.895" y2="490.895"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="110" x="102.5" y="486.1655">confirmBooking()</text><polygon fill="#000000" points="820.5,516.6943,830.5,520.6943,820.5,524.6943,824.5,520.6943" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="340.5" x2="826.5" y1="520.6943" y2="520.6943"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="225" x="347.5" y="515.9648">POST /api/vnpay/create-payment</text><path d="M847,536.1943 L847,683.1943 A2.5,2.5 0 0 0 849.5,685.6943 L1142.5,685.6943 A2.5,2.5 0 0 0 1145,683.1943 L1145,543.6943 L1135,533.6943 L849.5,533.6943 A2.5,2.5 0 0 0 847,536.1943 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M1135,533.6943 L1135,542.4443 A1.25,1.25 0 0 0 1136.25,543.6943 L1145,543.6943 L1135,533.6943 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="96" x="853" y="551.7642">Request body:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="120" x="853" y="567.5635">- amount: 200000</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="277" x="853" y="583.3628">- orderInfo: "Thanh toan dat coc xe dien"</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="171" x="853" y="599.1621">- paymentType: "deposit"</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="144" x="853" y="614.9614">- appointmentData: {</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="64" x="873" y="630.7607">vehicleId,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="102" x="873" y="646.5601">scheduledDate,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="97" x="873" y="662.3594">scheduledTime</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8" x="863" y="678.1587">}</text><polygon fill="#000000" points="1137.5,708.6875,1147.5,712.6875,1137.5,716.6875,1141.5,712.6875" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="842.5" x2="1143.5" y1="712.6875" y2="712.6875"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="213" x="849.5" y="707.958">createTransaction(vnpay, data)</text><polygon fill="#000000" points="1471,738.4868,1481,742.4868,1471,746.4868,1475,742.4868" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1159.5" x2="1477" y1="742.4868" y2="742.4868"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="131" x="1166.5" y="737.7573">INSERT Transaction</text><polygon fill="#000000" points="1170.5,768.2861,1160.5,772.2861,1170.5,776.2861,1166.5,772.2861" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="1164.5" x2="1487" y1="772.2861" y2="772.2861"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="88" x="1176.5" y="767.5566">transactionId</text><path d="M1164,787.7861 L1164,886.7861 A2.5,2.5 0 0 0 1166.5,889.2861 L1474.5,889.2861 A2.5,2.5 0 0 0 1477,886.7861 L1477,795.2861 L1467,785.2861 L1166.5,785.2861 A2.5,2.5 0 0 0 1164,787.7861 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M1467,785.2861 L1467,794.0361 A1.25,1.25 0 0 0 1468.25,795.2861 L1477,795.2861 L1467,785.2861 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="84" x="1170" y="803.356">Transaction:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="292" x="1170" y="819.1553">- transactionRef: APP{timestamp}{random}</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="126" x="1170" y="834.9546">- status: "pending"</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="248" x="1170" y="850.7539">- paymentPurpose: "deposit_booking"</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="120" x="1170" y="866.5532">- amount: 200000</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="215" x="1170" y="882.3525">- metadata: {appointmentData}</text><polygon fill="#000000" points="853.5,912.8813,843.5,916.8813,853.5,920.8813,849.5,916.8813" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="847.5" x2="1153.5" y1="916.8813" y2="916.8813"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="78" x="859.5" y="912.1519">Transaction</text><line style="stroke:#000000;stroke-width:2.0;" x1="842.5" x2="884.5" y1="946.6807" y2="946.6807"/><line style="stroke:#000000;stroke-width:2.0;" x1="884.5" x2="884.5" y1="946.6807" y2="959.6807"/><line style="stroke:#000000;stroke-width:2.0;" x1="843.5" x2="884.5" y1="959.6807" y2="959.6807"/><polygon fill="#000000" points="853.5,955.6807,843.5,959.6807,853.5,963.6807,849.5,959.6807" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="116" x="849.5" y="941.9512">buildPaymentUrl()</text><path d="M847,975.1807 L847,1058.1807 A2.5,2.5 0 0 0 849.5,1060.6807 L1121.5,1060.6807 A2.5,2.5 0 0 0 1124,1058.1807 L1124,982.6807 L1114,972.6807 L849.5,972.6807 A2.5,2.5 0 0 0 847,975.1807 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M1114,972.6807 L1114,981.4307 A1.25,1.25 0 0 0 1115.25,982.6807 L1124,982.6807 L1114,972.6807 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="100" x="853" y="990.7505">VNPay params:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="89" x="853" y="1006.5498">- vnp_TxnRef</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="256" x="853" y="1022.3491">- vnp_Amount: 20000000 (VND * 100)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="104" x="853" y="1038.1484">- vnp_ReturnUrl</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="122" x="853" y="1053.9478">- vnp_SecureHash</text><polygon fill="#000000" points="351.5,1084.4766,341.5,1088.4766,351.5,1092.4766,347.5,1088.4766" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="345.5" x2="836.5" y1="1088.4766" y2="1088.4766"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="294" x="357.5" y="1083.7471">{paymentUrl, transactionRef, transactionId}</text><polygon fill="#000000" points="1319.5,1114.2759,1329.5,1118.2759,1319.5,1122.2759,1323.5,1118.2759" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="335.5" x2="1325.5" y1="1118.2759" y2="1118.2759"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="137" x="342.5" y="1113.5464">redirect(paymentUrl)</text><polygon fill="#000000" points="106.5,1144.0752,96.5,1148.0752,106.5,1152.0752,102.5,1148.0752" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="100.5" x2="1335.5" y1="1148.0752" y2="1148.0752"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="146" x="112.5" y="1143.3457">displayPaymentPage()</text><polygon fill="#000000" points="1319.5,1173.8745,1329.5,1177.8745,1319.5,1181.8745,1323.5,1177.8745" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="95.5" x2="1325.5" y1="1177.8745" y2="1177.8745"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="130" x="102.5" y="1173.145">enterPaymentInfo()</text><line style="stroke:#000000;stroke-width:2.0;" x1="1341.5" x2="1383.5" y1="1207.6738" y2="1207.6738"/><line style="stroke:#000000;stroke-width:2.0;" x1="1383.5" x2="1383.5" y1="1207.6738" y2="1220.6738"/><line style="stroke:#000000;stroke-width:2.0;" x1="1342.5" x2="1383.5" y1="1220.6738" y2="1220.6738"/><polygon fill="#000000" points="1352.5,1216.6738,1342.5,1220.6738,1352.5,1224.6738,1348.5,1220.6738" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="120" x="1348.5" y="1202.9443">processPayment()</text><path d="M17.5,1235.6738 L79,1235.6738 L79,1243.4731 L69,1253.4731 L15,1253.4731 L15,1238.1738 A2.5,2.5 0 0 1 17.5,1235.6738 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="2355.501" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="1923" x="15" y="1235.6738"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="30" y="1249.7437">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="323" x="94" y="1248.7329">[Payment Success [vnp_ResponseCode == "00"]]</text><polygon fill="#000000" points="853.5,1287.0718,843.5,1291.0718,853.5,1295.0718,849.5,1291.0718" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="847.5" x2="1330.5" y1="1291.0718" y2="1291.0718"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="148" x="859.5" y="1270.543">GET /api/vnpay/return</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="164" x="859.5" y="1286.3423">[vnp_ResponseCode=00]</text><path d="M847,1306.5718 L847,1405.5718 A2.5,2.5 0 0 0 849.5,1408.0718 L1041.5,1408.0718 A2.5,2.5 0 0 0 1044,1405.5718 L1044,1314.0718 L1034,1304.0718 L849.5,1304.0718 A2.5,2.5 0 0 0 847,1306.5718 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M1034,1304.0718 L1034,1312.8218 A1.25,1.25 0 0 0 1035.25,1314.0718 L1044,1314.0718 L1034,1304.0718 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="112" x="853" y="1322.1416">Callback params:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="89" x="853" y="1337.9409">- vnp_TxnRef</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="176" x="853" y="1353.7402">- vnp_ResponseCode: "00"</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="139" x="853" y="1369.5396">- vnp_TransactionNo</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="94" x="853" y="1385.3389">- vnp_Amount</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="122" x="853" y="1401.1382">- vnp_SecureHash</text><line style="stroke:#000000;stroke-width:2.0;" x1="842.5" x2="884.5" y1="1435.667" y2="1435.667"/><line style="stroke:#000000;stroke-width:2.0;" x1="884.5" x2="884.5" y1="1435.667" y2="1448.667"/><line style="stroke:#000000;stroke-width:2.0;" x1="843.5" x2="884.5" y1="1448.667" y2="1448.667"/><polygon fill="#000000" points="853.5,1444.667,843.5,1448.667,853.5,1452.667,849.5,1448.667" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="109" x="849.5" y="1430.9375">verifyReturnUrl()</text><polygon fill="#000000" points="1471,1490.2656,1481,1494.2656,1471,1498.2656,1475,1494.2656" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="842.5" x2="1477" y1="1494.2656" y2="1494.2656"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="133" x="849.5" y="1473.7368">SELECT Transaction</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="243" x="849.5" y="1489.5361">WHERE transactionRef = vnp_TxnRef</text><polygon fill="#000000" points="853.5,1520.0649,843.5,1524.0649,853.5,1528.0649,849.5,1524.0649" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="847.5" x2="1487" y1="1524.0649" y2="1524.0649"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="78" x="859.5" y="1519.3354">Transaction</text><polygon fill="#000000" points="1137.5,1549.8643,1147.5,1553.8643,1137.5,1557.8643,1141.5,1553.8643" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="842.5" x2="1143.5" y1="1553.8643" y2="1553.8643"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="288" x="849.5" y="1549.1348">updateTransactionStatus(completed, data)</text><polygon fill="#000000" points="1471,1595.4629,1481,1599.4629,1471,1603.4629,1475,1599.4629" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1159.5" x2="1477" y1="1599.4629" y2="1599.4629"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="135" x="1166.5" y="1578.9341">UPDATE Transaction</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="170" x="1166.5" y="1594.7334">SET status = "completed"</text><polygon fill="#000000" points="1170.5,1625.2622,1160.5,1629.2622,1170.5,1633.2622,1166.5,1629.2622" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="1164.5" x2="1487" y1="1629.2622" y2="1629.2622"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="18" x="1176.5" y="1624.5327">OK</text><path d="M1164,1644.7622 L1164,1727.7622 A2.5,2.5 0 0 0 1166.5,1730.2622 L1493.5,1730.2622 A2.5,2.5 0 0 0 1496,1727.7622 L1496,1652.2622 L1486,1642.2622 L1166.5,1642.2622 A2.5,2.5 0 0 0 1164,1644.7622 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M1486,1642.2622 L1486,1651.0122 A1.25,1.25 0 0 0 1487.25,1652.2622 L1496,1652.2622 L1486,1642.2622 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="53" x="1170" y="1660.332">Update:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="143" x="1170" y="1676.1313">- status: "completed"</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="141" x="1170" y="1691.9307">- responseCode: "00"</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="148" x="1170" y="1707.73">- paidAmount: 200000</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="311" x="1170" y="1723.5293">- vnpayData: {bankCode, cardType, payDate}</text><polygon fill="#000000" points="853.5,1754.0581,843.5,1758.0581,853.5,1762.0581,849.5,1758.0581" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="847.5" x2="1153.5" y1="1758.0581" y2="1758.0581"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="78" x="859.5" y="1753.3286">Transaction</text><polygon fill="#000000" points="1319.5,1783.8574,1329.5,1787.8574,1319.5,1791.8574,1323.5,1787.8574" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="837.5" x2="1325.5" y1="1787.8574" y2="1787.8574"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="368" x="844.5" y="1783.1279">redirect(clientUrl/payment/vnpay-return?success=true)</text><polygon fill="#000000" points="351.5,1813.6567,341.5,1817.6567,351.5,1821.6567,347.5,1817.6567" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="345.5" x2="1335.5" y1="1817.6567" y2="1817.6567"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="51" x="357.5" y="1812.9272">redirect</text><polygon fill="#000000" points="106.5,1843.4561,96.5,1847.4561,106.5,1851.4561,102.5,1847.4561" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="100.5" x2="329.5" y1="1847.4561" y2="1847.4561"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="169" x="112.5" y="1842.7266">displayPaymentSuccess()</text><polygon fill="#000000" points="593.5,1873.2554,603.5,1877.2554,593.5,1881.2554,597.5,1877.2554" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="340.5" x2="599.5" y1="1877.2554" y2="1877.2554"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="161" x="347.5" y="1872.5259">POST /api/appointments</text><path d="M620,1892.7554 L620,2007.7554 A2.5,2.5 0 0 0 622.5,2010.2554 L860.5,2010.2554 A2.5,2.5 0 0 0 863,2007.7554 L863,1900.2554 L853,1890.2554 L622.5,1890.2554 A2.5,2.5 0 0 0 620,1892.7554 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M853,1890.2554 L853,1899.0054 A1.25,1.25 0 0 0 854.25,1900.2554 L863,1900.2554 L853,1890.2554 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="96" x="626" y="1908.3252">Request body:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="71" x="626" y="1924.1245">- vehicleId</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="222" x="626" y="1939.9238">- bookingType: "deposit_booking"</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="147" x="626" y="1955.7231">- services: [] (empty)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="216" x="626" y="1971.5225">- scheduledDate, scheduledTime</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="180" x="626" y="1987.3218">- customerNotes (optional)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="218" x="626" y="2003.1211">- paymentInfo: {transactionRef}</text><polygon fill="#000000" points="1471,2049.4492,1481,2053.4492,1471,2057.4492,1475,2053.4492" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="615.5" x2="1477" y1="2053.4492" y2="2053.4492"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="102" x="622.5" y="2032.9204">SELECT Vehicle</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="319" x="622.5" y="2048.7197">WHERE _id = vehicleId AND customerId = userId</text><polygon fill="#000000" points="626.5,2079.2485,616.5,2083.2485,626.5,2087.2485,622.5,2083.2485" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="620.5" x2="1487" y1="2083.2485" y2="2083.2485"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="47" x="632.5" y="2078.519">Vehicle</text><line style="stroke:#000000;stroke-width:2.0;" x1="615.5" x2="657.5" y1="2113.0479" y2="2113.0479"/><line style="stroke:#000000;stroke-width:2.0;" x1="657.5" x2="657.5" y1="2113.0479" y2="2126.0479"/><line style="stroke:#000000;stroke-width:2.0;" x1="616.5" x2="657.5" y1="2126.0479" y2="2126.0479"/><polygon fill="#000000" points="626.5,2122.0479,616.5,2126.0479,626.5,2130.0479,622.5,2126.0479" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="179" x="622.5" y="2108.3184">validateVehicleOwnership()</text><line style="stroke:#000000;stroke-width:2.0;" x1="615.5" x2="657.5" y1="2155.8472" y2="2155.8472"/><line style="stroke:#000000;stroke-width:2.0;" x1="657.5" x2="657.5" y1="2155.8472" y2="2168.8472"/><line style="stroke:#000000;stroke-width:2.0;" x1="616.5" x2="657.5" y1="2168.8472" y2="2168.8472"/><polygon fill="#000000" points="626.5,2164.8472,616.5,2168.8472,626.5,2172.8472,622.5,2168.8472" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="203" x="622.5" y="2151.1177">generateAppointmentNumber()</text><path d="M620,2184.3472 L620,2220.3472 A2.5,2.5 0 0 0 622.5,2222.8472 L987.5,2222.8472 A2.5,2.5 0 0 0 990,2220.3472 L990,2191.8472 L980,2181.8472 L622.5,2181.8472 A2.5,2.5 0 0 0 620,2184.3472 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M980,2181.8472 L980,2190.5972 A1.25,1.25 0 0 0 981.25,2191.8472 L990,2191.8472 L980,2181.8472 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="349" x="626" y="2199.917">appointmentNumber: APT{YYMMDD}{random3digits}</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="162" x="626" y="2215.7163">Example: APT250106234</text><polygon fill="#000000" points="1471,2246.2451,1481,2250.2451,1471,2254.2451,1475,2250.2451" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="615.5" x2="1477" y1="2250.2451" y2="2250.2451"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="136" x="622.5" y="2245.5156">INSERT Appointment</text><path d="M1498,2265.7451 L1498,2506.7451 A2.5,2.5 0 0 0 1500.5,2509.2451 L1768.5,2509.2451 A2.5,2.5 0 0 0 1771,2506.7451 L1771,2273.2451 L1761,2263.2451 L1500.5,2263.2451 A2.5,2.5 0 0 0 1498,2265.7451 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M1761,2263.2451 L1761,2271.9951 A1.25,1.25 0 0 0 1762.25,2273.2451 L1771,2273.2451 L1761,2263.2451 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="89" x="1504" y="2281.3149">Appointment:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="252" x="1504" y="2297.1143">- appointmentNumber: APT250106234</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="86" x="1504" y="2312.9136">- customerId</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="71" x="1504" y="2328.7129">- vehicleId</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="147" x="1504" y="2344.5122">- services: [] (empty)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="222" x="1504" y="2360.3115">- bookingType: "deposit_booking"</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="105" x="1504" y="2376.1108">- depositInfo: {</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="113" x="1524" y="2391.9102">amount: 200000,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="70" x="1524" y="2407.7095">paid: true,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="85" x="1524" y="2423.5088">paidAt: now,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="88" x="1524" y="2439.3081">transactionId</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8" x="1514" y="2455.1074">}</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="139" x="1504" y="2470.9067">- status: "confirmed"</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="216" x="1504" y="2486.7061">- scheduledDate, scheduledTime</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="180" x="1504" y="2502.5054">- customerNotes (optional)</text><polygon fill="#000000" points="626.5,2533.0342,616.5,2537.0342,626.5,2541.0342,622.5,2537.0342" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="620.5" x2="1487" y1="2537.0342" y2="2537.0342"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="95" x="632.5" y="2532.3047">appointmentId</text><polygon fill="#000000" points="1137.5,2562.8335,1147.5,2566.8335,1137.5,2570.8335,1141.5,2566.8335" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="615.5" x2="1143.5" y1="2566.8335" y2="2566.8335"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="433" x="622.5" y="2562.104">updateTransactionAppointmentId(transactionRef, appointmentId)</text><polygon fill="#000000" points="1471,2608.4321,1481,2612.4321,1471,2616.4321,1475,2612.4321" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1159.5" x2="1477" y1="2612.4321" y2="2612.4321"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="135" x="1166.5" y="2591.9033">UPDATE Transaction</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="240" x="1166.5" y="2607.7026">SET appointmentId = appointmentId</text><polygon fill="#000000" points="1170.5,2638.2314,1160.5,2642.2314,1170.5,2646.2314,1166.5,2642.2314" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="1164.5" x2="1487" y1="2642.2314" y2="2642.2314"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="18" x="1176.5" y="2637.502">OK</text><polygon fill="#000000" points="626.5,2668.0308,616.5,2672.0308,626.5,2676.0308,622.5,2672.0308" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="620.5" x2="1153.5" y1="2672.0308" y2="2672.0308"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="18" x="632.5" y="2667.3013">OK</text><path d="M50.5,2687.0308 L117,2687.0308 L117,2694.8301 L107,2704.8301 L48,2704.8301 L48,2689.5308 A2.5,2.5 0 0 1 50.5,2687.0308 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="207.9932" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="1880" x="48" y="2687.0308"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="24" x="63" y="2701.1006">par</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="171" x="132" y="2700.0898">[Send email confirmation]</text><polygon fill="#000000" points="1613.5,2722.6294,1623.5,2726.6294,1613.5,2730.6294,1617.5,2726.6294" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="615.5" x2="1619.5" y1="2726.6294" y2="2726.6294"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="390" x="622.5" y="2721.8999">sendAppointmentConfirmation(appointmentData, userData)</text><path d="M1640,2742.1294 L1640,2857.1294 A2.5,2.5 0 0 0 1642.5,2859.6294 L1915.5,2859.6294 A2.5,2.5 0 0 0 1918,2857.1294 L1918,2749.6294 L1908,2739.6294 L1642.5,2739.6294 A2.5,2.5 0 0 0 1640,2742.1294 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M1908,2739.6294 L1908,2748.3794 A1.25,1.25 0 0 0 1909.25,2749.6294 L1918,2749.6294 L1908,2739.6294 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="96" x="1646" y="2757.6992">Email content:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="257" x="1646" y="2773.4985">- Appointment number: APT250106234</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="162" x="1646" y="2789.2979">- Scheduled date &amp; time</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="138" x="1646" y="2805.0972">- Service center info</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="189" x="1646" y="2820.8965">- Deposit paid: 200,000 VND</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="231" x="1646" y="2836.6958">- Note: D&#7883;ch v&#7909; c&#7909; th&#7875; s&#7869; x&#225;c &#273;&#7883;nh</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="197" x="1656" y="2852.4951">sau khi technician ki&#7875;m tra xe</text><polygon fill="#000000" points="106.5,2883.0239,96.5,2887.0239,106.5,2891.0239,102.5,2887.0239" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="100.5" x2="1629.5" y1="2887.0239" y2="2887.0239"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="114" x="112.5" y="2882.2944">confirmationEmail</text><polygon fill="#000000" points="1471,2935.6226,1481,2939.6226,1471,2943.6226,1475,2939.6226" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="615.5" x2="1477" y1="2939.6226" y2="2939.6226"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="138" x="622.5" y="2919.0938">SELECT Appointment</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="156" x="622.5" y="2934.8931">WITH populate(vehicle)</text><polygon fill="#000000" points="626.5,2965.4219,616.5,2969.4219,626.5,2973.4219,622.5,2969.4219" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="620.5" x2="1487" y1="2969.4219" y2="2969.4219"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="148" x="632.5" y="2964.6924">PopulatedAppointment</text><polygon fill="#000000" points="351.5,2995.2212,341.5,2999.2212,351.5,3003.2212,347.5,2999.2212" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="345.5" x2="609.5" y1="2999.2212" y2="2999.2212"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="241" x="357.5" y="2994.4917">{success: true, data: Appointment}</text><polygon fill="#000000" points="106.5,3025.0205,96.5,3029.0205,106.5,3033.0205,102.5,3029.0205" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="100.5" x2="334.5" y1="3029.0205" y2="3029.0205"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="211" x="112.5" y="3024.291">showAppointmentConfirmation()</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="15" x2="1938" y1="3038.0205" y2="3038.0205"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="306" x="20" y="3049.0796">[Payment Failed [vnp_ResponseCode != "00"]]</text><polygon fill="#000000" points="853.5,3085.9878,843.5,3089.9878,853.5,3093.9878,849.5,3089.9878" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="847.5" x2="1335.5" y1="3089.9878" y2="3089.9878"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="148" x="859.5" y="3069.459">GET /api/vnpay/return</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="189" x="859.5" y="3085.2583">[vnp_ResponseCode != "00"]</text><line style="stroke:#000000;stroke-width:2.0;" x1="842.5" x2="884.5" y1="3119.7871" y2="3119.7871"/><line style="stroke:#000000;stroke-width:2.0;" x1="884.5" x2="884.5" y1="3119.7871" y2="3132.7871"/><line style="stroke:#000000;stroke-width:2.0;" x1="843.5" x2="884.5" y1="3132.7871" y2="3132.7871"/><polygon fill="#000000" points="853.5,3128.7871,843.5,3132.7871,853.5,3136.7871,849.5,3132.7871" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="109" x="849.5" y="3115.0576">verifyReturnUrl()</text><polygon fill="#000000" points="1471,3158.5864,1481,3162.5864,1471,3166.5864,1475,3162.5864" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="842.5" x2="1477" y1="3162.5864" y2="3162.5864"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="133" x="849.5" y="3157.8569">SELECT Transaction</text><polygon fill="#000000" points="853.5,3188.3857,843.5,3192.3857,853.5,3196.3857,849.5,3192.3857" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="847.5" x2="1487" y1="3192.3857" y2="3192.3857"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="78" x="859.5" y="3187.6563">Transaction</text><polygon fill="#000000" points="1137.5,3218.1851,1147.5,3222.1851,1137.5,3226.1851,1141.5,3222.1851" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="842.5" x2="1143.5" y1="3222.1851" y2="3222.1851"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="255" x="849.5" y="3217.4556">updateTransactionStatus(failed, data)</text><polygon fill="#000000" points="1471,3263.7837,1481,3267.7837,1471,3271.7837,1475,3267.7837" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1159.5" x2="1477" y1="3267.7837" y2="3267.7837"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="135" x="1166.5" y="3247.2549">UPDATE Transaction</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="137" x="1166.5" y="3263.0542">SET status = "failed"</text><path d="M1498,3283.2837 L1498,3351.2837 A2.5,2.5 0 0 0 1500.5,3353.7837 L1734.5,3353.7837 A2.5,2.5 0 0 0 1737,3351.2837 L1737,3290.7837 L1727,3280.7837 L1500.5,3280.7837 A2.5,2.5 0 0 0 1498,3283.2837 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M1727,3280.7837 L1727,3289.5337 A1.25,1.25 0 0 0 1728.25,3290.7837 L1737,3290.7837 L1727,3280.7837 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="53" x="1504" y="3298.8535">Update:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="110" x="1504" y="3314.6528">- status: "failed"</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="214" x="1504" y="3330.4521">- errorCode: vnp_ResponseCode</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="218" x="1504" y="3346.2515">- errorMessage: "Payment failed"</text><polygon fill="#000000" points="1170.5,3376.7803,1160.5,3380.7803,1170.5,3384.7803,1166.5,3380.7803" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="1164.5" x2="1487" y1="3380.7803" y2="3380.7803"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="18" x="1176.5" y="3376.0508">OK</text><polygon fill="#000000" points="853.5,3406.5796,843.5,3410.5796,853.5,3414.5796,849.5,3410.5796" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="847.5" x2="1153.5" y1="3410.5796" y2="3410.5796"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="78" x="859.5" y="3405.8501">Transaction</text><polygon fill="#000000" points="1324.5,3436.3789,1334.5,3440.3789,1324.5,3444.3789,1328.5,3440.3789" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="837.5" x2="1330.5" y1="3440.3789" y2="3440.3789"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="436" x="844.5" y="3435.6494">redirect(clientUrl/payment/vnpay-return?success=false&amp;error=...)</text><polygon fill="#000000" points="351.5,3466.1782,341.5,3470.1782,351.5,3474.1782,347.5,3470.1782" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="345.5" x2="1335.5" y1="3470.1782" y2="3470.1782"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="51" x="357.5" y="3465.4487">redirect</text><polygon fill="#000000" points="106.5,3495.9775,96.5,3499.9775,106.5,3503.9775,102.5,3499.9775" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="100.5" x2="334.5" y1="3499.9775" y2="3499.9775"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="152" x="112.5" y="3495.248">displayPaymentFailed()</text><path d="M25,3515.4775 L25,3583.4775 A2.5,2.5 0 0 0 27.5,3585.9775 L163.5,3585.9775 A2.5,2.5 0 0 0 166,3583.4775 L166,3522.9775 L156,3512.9775 L27.5,3512.9775 A2.5,2.5 0 0 0 25,3515.4775 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M156,3512.9775 L156,3521.7275 A1.25,1.25 0 0 0 157.25,3522.9775 L166,3522.9775 L156,3512.9775 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="116" x="31" y="3531.0474">Customer c&#243; th&#7875;:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="109" x="31" y="3546.8467">- Retry payment</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="111" x="31" y="3562.646">- Cancel booking</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="120" x="31" y="3578.4453">- Contact support</text><path d="M44,3605.6748 L44,4004.6748 A2.5,2.5 0 0 0 46.5,4007.1748 L1678.5,4007.1748 A2.5,2.5 0 0 0 1681,4004.6748 L1681,3613.1748 L1671,3603.1748 L46.5,3603.1748 A2.5,2.5 0 0 0 44,3605.6748 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M1671,3603.1748 L1671,3611.9248 A1.25,1.25 0 0 0 1672.25,3613.1748 L1681,3613.1748 L1671,3603.1748 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="113" x="625.25" y="3621.2446">Business Rules:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="270" x="625.25" y="3637.0439">1. Deposit amount c&#7889; &#273;&#7883;nh: 200,000 VND</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="416" x="625.25" y="3652.8433">2. Appointment auto-confirmed sau khi thanh to&#225;n th&#224;nh c&#244;ng</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="349" x="625.25" y="3668.6426">3. Transaction lifecycle: pending &#8594; completed/failed</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="13" x="625.25" y="3684.4419">4.</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="117" x="643.25" y="3684.4419">Deposit Booking</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="331" x="760.25" y="3684.4419">: services[] = empty, x&#225;c &#273;&#7883;nh sau khi ki&#7875;m tra xe</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="383" x="625.25" y="3700.2412">5. Customer ch&#7881; ch&#7885;n ng&#224;y/gi&#7901; v&#224; xe, kh&#244;ng ch&#7885;n d&#7883;ch v&#7909;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="5" x="625.25" y="3716.0405">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="127" x="625.25" y="3731.8398">Technical Details:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="362" x="625.25" y="3747.6392">- VNPay amount: VND * 100 (20,000,000 = 200k VND)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="389" x="625.25" y="3763.4385">- Transaction ref format: APP{timestamp}{random9chars}</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="414" x="625.25" y="3779.2378">- Appointment number format: APT{YYMMDD}{random3digits}</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="207" x="625.25" y="3795.0371">- Payment timeout: 15 minutes</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="339" x="625.25" y="3810.8364">- bookingType: "deposit_booking" (services empty)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="5" x="625.25" y="3826.6357">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="65" x="625.25" y="3842.4351">Security:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="217" x="625.25" y="3858.2344">- VNPay secure hash verification</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="198" x="625.25" y="3874.0337">- Vehicle ownership validation</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="244" x="625.25" y="3889.833">- JWT authentication for all API calls</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="5" x="625.25" y="3905.6323">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="84" x="625.25" y="3921.4316">Next Steps:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="249" x="625.25" y="3937.231">Sau khi customer &#273;&#7871;n service center:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="280" x="625.25" y="3953.0303">1. Technician ki&#7875;m tra xe (EV diagnostics)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="341" x="625.25" y="3968.8296">2. T&#7841;o ServiceReception v&#7899;i recommended services</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="213" x="625.25" y="3984.6289">3. Staff duy&#7879;t services v&#224; parts</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="277" x="625.25" y="4000.4282">4. Customer &#273;&#7891;ng &#253; &#8594; Proceed to service</text><!--SRC=[lLh_Qnl95VzTVyKx_t2LZMmhJbAeEAV8iXAhiMLXoKd39OJnxiXQlDhTxixQ5i5mHw17EGfDszzA8I7afwRqQ0kbDiVze73_X_gNzCsttPcLBETQ-_H38i-yzsRclS_xDgDFs80EAKG-yO9IwIVGc9o_Is4mVXyC864ZdvQI8o-8I4o6q24nynml8W7h4DVrWaDOgnhp6-6f7hzbZYVqLoaD75gFu_2aD_2Seu0c2QmP976O1guJnW6DuIxVnyxuTGh9vFnl3k0EGpWc7h1u_7U39ygt0ozAW9yDuXmT2b6Dq0_ZppwhEooCxzs3RUzmm3RybCucsszfcWSnfS5ieYwDZps7QiedrFV3azcapLD6uu3uchRZ1KUN21qbZ0wHxl70OxGx38zewQnKOXxpAUepFEBAFF7O03Pf52OUGoECXXHFV1zNXx8UtGtyqUBJeFa8r3QXWKIep1qIa4CgEEHQNBdhr_X1STkj-ytjLhlPXMNeeiaYE9sSVnS1crpyXHljZGS9mND4WydvMq_Qqqyd5t_0CVRzDz-_uV-FtpZNlRCIuUQ7HfgmS8YwoF1GCg6peDJSGJqj04bWlmKI4ZPPFOf2Bs1SbKh7WXg7kySE6FYmsHwrqMADC61nwFiq5ZnYx7AMNao21FVkXO6vKk_qweKU44PFo4ZGg-zWuj5csIIC7914Yj_SW1oFDbrpI3pVt8eOCCbBGSWeXCSqLtT5KWdSBotj9mX9NAgsj9GRvCEhoVc_63YJYzyw64ggbMgrYihPv1CNB-403GF-vE9hPm08dNy7K3uQZF-9Q746o1A0A-UE9nVl5jKwdPWkEs7WUbnxXSN6R_6V3o-HFq1nVuqgu8p_0QSKCHhY8Chy2i4vkNWL76ffOS9iSGOAKDZttqmktcA4cfo_2Vas_eH8PuIb2ImWLz-BXzHTgAW3YWsm0S78oiBncq2jqKRDSScR-M4umpknbPSy1duBf-WTGYbVyx1CKZWQe1zHPn2WZKW0HnwI3l4S18zJee4Bt1utuEgThNgt2RTgqDZlzdPtcdlmuNUjoSKNRRY_kxS36xkx3rlj1zVko9aHb-znzwn1t_DzvRVtmtXONkI-xXqZud6-L48QJNbCVC_5yLOGfGpf959Z7fOXx7DgReP7Ygec_bg6OuffogSj5-Yfbx143IVEWBgfJzrDlf8GNPpfUPXE2QOhdnpuLCqUoAtsHX6jmO8hW_PpDRfW68nl77UUdRS6oI0yqH4gfiSUFS53kDGwxfHw5FWKNr4xDuIAjHhq9kUlTw5JVxBJRFTWVs_xsf4WBIi3Q0qwkzqUh9B8Mpt6ec2qwiGK3xaSoHoPdrhG5qql1xc1zdY1aZ0qaplI2213JDEiniCIVjHW6BiqRWNz4AtOKvwCxeV8GPKxF9Iu7WqM5BNQXcrrFKdoGCB3S4sLCFoJWQ-I3Ld0cp7CKQT6pmmuIJsXmcJkG6081Ha9fYmKL-5780PC17sf9DcG7vD33LhjRdEl1mPtph2vKKAQPMCfbfErN1EnI5gmX5oDRzwGhGrXoDcZ_HhKEvqN38-BWNOOdRt0MJSSdcat5D4NjHsX4eHlMQRef34QOQOFph7wa3BYIXiLh6RgMkdAGAUfAEFyIhUPRJJvGUhvhYhlzcD_EbRbW9KieWnEif0LHCzxfrn7na3TEWzcrp9FhqjOdrSN3R8zoj8um4MDiIvrqfXkaMGm3IWTPrv4sNOh1KDLR02ScHfGxdX3SUWsQdwhtjw2tkxuoxQ8IIs-PFt93KKZNMZL8AQk5rE7bNEz58DrzbrnbKgQtOxxhfTWKpPIUE35gHttCtOp-ESx4TM_OkO1oym1irREEQCuTB0zKxmSXSJFsuvkwl1P-5p29ed28A6DqAMeMLYeLXUUbGI63D4Qtm-QLgoE1UQU1bEIrglLPq964Izyx3AFu9y6yVq3xB0invZf72RoyuLhuW15hXp5xR0m9xshC6Zu3H_CVITtN4CfM35x_L7cVrpT5fq8lDtcThDX1TwdmUEjvbwpu7EmNZoe6NJvtof6pufGVBeGfQsTwBYUHgwTGheYvfQTS1Zvb55N9nDhVHNqH8otaif-PxFUQzfdwo9IL1szpYjf9NXXtf7qzdOVNdQIot8E_-n7UVLNo2I5vULiF0ys4V7S-dGYoI12HYhZ7v3WY4l03e74BgyJAY1dwTaCyCpFC8LJ6mhFW_QCIENudWnKgofcIVTSbkxvyqJw-pgBKxfONCFmoypVTMhG2nHvik1ZsPANfS8EhRbXK4KVxINN7CwbI9b4xkXY5ikDtLQx9mhQRdqV7cwrxFIoDVu2_sYC_uXzpmriob2BkcemorwZ7abiZKhYMSXNCngIqyLleGKongxeOmplaPS5w3-VFuCo7KPij6XEM-Nip3AMapaA1xn5Jg0SHXpen5-qV2rBSUXGTZYSvKDAXuN8-aYULKVLvvxBGsdM0zQnPj9xQV6fDE5VveMZp5PAz6L1ATzFng4xLiMvUnBGE1buaKRz39P3YZJ8OjnEjDFX0Oqrprm4a28NBx9xBvuysTdPtDGLzctNE_HOSfPnDKy93uo2TkrkzLRrfsktxrojSTL463kTKkEC7IlbAdcQquJhx4FO6xDHPI5x5jgl0F57EuEQKXZD9iInhJHHiUPu6k5jL4gdn-l84uGdzeJTSUNZPxFJchwVkcQ_jArVT0V3J6gFSvtYqgAZRief5riFQvN_jnAnXA7pJn_XVov9yeoUAMYQsDZm3IQykrYWJoxUjw2vKszjmo_7NpQWlJKvVz- -iQo6PJfqELoek4vMY2HPDMD3GTuvrz0h0zUmViFWAXVQyue8r9jPDMhPIjvEP-DslCclhhDmf_V8hC0Z7SAy5GxcHHz9tjL-nIjb2fy2C_rBqQXt74U-utWOF0eK-kr7nWdZ-hn09owOF_fwsMA6go-RDQ7jzhd6x7BEjB6jOmFm-GGAdPUs3RLZwcxrjY0AezH76MKLpnS_AaTt59TRp4fpObDs1Q8gP1MfGLuK6OBEYfBCocogtkNNlPUXUwh-vbKpzHEQFmgYuX1Lqytv9zVLdEUIBklGhwl5_R7xrxxGtNKthrBgmW-iSUQqewP0EKNZE8nb8rgqLf5g1u5A3dcveX5ZYfkPkNz84llnsz8-GVX_AiwslhAoShCTwaSqgD81PtjgPd7hcJI_lT8o-QEa2Cwc_T5zuf7kTepn1WaSwkjQr9p0J8NBGv9YD8bPmS0Yi5xx_MjxjoT-1B2H9fxuYSSU9ha4ZiUleIVp1_4nRJ5KKdBjTx5NlK3RcwejBOdnMojP7fMrE4-EhtGod4whQojMiYSf2vUpKZhFblahBtuVlyO_7FvmBKJSNZ4T17olJvsHmpifzMW1__drxo6xTbgLBYfOxwpWGVH-rUlUqb8jwrImJra7qQXKPhyPJ-Vkkoi6yX1rlz6Fwy7X-FLezH0P_YmiU8h9xTBdzv9IyfIPjPwNbRlhXYTxXe3ocj2mqF8wr_SHdzIl4wQcOjg7ViYpuIMlG3zp1YHEz5lGT55cSCzjRvUpXCgN25Fak7KNXbwGOh_pKK-wKDOc0TKtAWM9ss6FZOfwISIjCGn8Cf094vMOnSzbVOi0eRuCqBS4ESal7lSu70UuRSNBZml4z_6uBK2ReDFftnpGKmPTHgFCFbq54CVyRSPtWKQMAaDhscTwbvI3K6u-mf183eCmmMqaYzffUk8d4ggetQCE5JsZ-iq4Hk5mYFfskGiflMbNmUpSxuERZYONNx5iLY2I_qObqNvX_gX4_B9e_Atmemv_pa2vBDJC-NFMVm40]--></g></svg>